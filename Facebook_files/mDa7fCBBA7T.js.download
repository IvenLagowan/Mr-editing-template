;/*FB_PKG_DELIM*/

__d("CometUFIClassicCommentTopReactions_feedback$normalization.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b=[a];return{kind:"SplitOperation",metadata:{},name:"CometUFIClassicCommentTopReactions_feedback$normalization",selections:[{alias:null,args:null,concreteType:"ReactorsOfContentConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"count_reduced",storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Variable",name:"use_default_actor",variableName:"useDefaultActor"}],concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"viewer_feedback_reaction_info",plural:!1,selections:b,storageKey:null},a,{alias:null,args:[{kind:"Literal",name:"orderby",value:["COUNT_DESC","REACTION_TYPE"]}],concreteType:"TopReactionsConnection",kind:"LinkedField",name:"top_reactions",plural:!1,selections:[{alias:null,args:null,concreteType:"TopReactionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"reaction_count",storageKey:null},{alias:null,args:null,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"node",plural:!1,selections:b,storageKey:null}],storageKey:null}],storageKey:'top_reactions(orderby:["COUNT_DESC","REACTION_TYPE"])'}]}}();e.exports=a}),null);
__d("CometUFIClassicCommentTopReactions_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b=[a];return{argumentDefinitions:[{kind:"RootArgument",name:"useDefaultActor"}],kind:"Fragment",metadata:null,name:"CometUFIClassicCommentTopReactions_feedback",selections:[{alias:null,args:null,concreteType:"ReactorsOfContentConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"count_reduced",storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Variable",name:"use_default_actor",variableName:"useDefaultActor"}],concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"viewer_feedback_reaction_info",plural:!1,selections:b,storageKey:null},a,{alias:null,args:[{kind:"Literal",name:"orderby",value:["COUNT_DESC","REACTION_TYPE"]}],concreteType:"TopReactionsConnection",kind:"LinkedField",name:"top_reactions",plural:!1,selections:[{alias:null,args:null,concreteType:"TopReactionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"reaction_count",storageKey:null},{alias:null,args:null,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"node",plural:!1,selections:b,storageKey:null}],storageKey:null}],storageKey:'top_reactions(orderby:["COUNT_DESC","REACTION_TYPE"])'}],type:"Feedback",abstractKey:null}}();e.exports=a}),null);
__d("CometUFICommentListRenderer_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{defaultValue:!0,kind:"LocalArgument",name:"canShowSeenState"},{kind:"RootArgument",name:"feedbackSource"},{defaultValue:!1,kind:"LocalArgument",name:"hasScenario"}],kind:"Fragment",metadata:null,name:"CometUFICommentListRenderer_feedback",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:[{kind:"Variable",name:"feedback_source_integer",variableName:"feedbackSource"}],kind:"ScalarField",name:"is_eligible_for_enhanced_comment_updates",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_synced_qa_post",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subscription_target_id",storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"associated_video",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"broadcast_is_ama_enabled",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"comment_list_renderer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{args:[{kind:"Variable",name:"hasScenario",variableName:"hasScenario"}],documentName:"CometUFICommentListRenderer_feedback",fragmentName:"CometUFICommentListRendererForDisplayComments_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBCommentListRendererForDisplayComments",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometUFICommentListRenderer_feedback",fragmentName:"CometUFICommentListRendererForCommentsAPI_renderer",fragmentPropName:"renderer",kind:"ModuleImport"}],type:"XFBCommentListRendererForCommentsAPI",abstractKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useCometHandleCommitCommentCreate_feedback"}],type:"Feedback",abstractKey:null};e.exports=a}),null);
__d("CometUFICommentTopReactionsRenderer.react",["fbt","CometLoggedOutCTAStrings","CometPressable.react","CometReactionIcon.react","CometUFIReactionsDialog.entrypoint","CometUFITooltip.react","DynamicUFIReactionTypes","JSResourceForInteraction","WebPixelRatio","gkx","qpl","react","recoverableViolation","useCAALoggedOutDialogWrapper","useCometEntryPointDialog","useCometInteractionTracing","useCurrentRoute"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useCallback,k=b.useRef,l=c("gkx")("976093"),m=c("JSResourceForInteraction")("CometUFICommentReactionIconTooltipContent.react").__setRef("CometUFICommentTopReactionsRenderer.react");function a(a){var b=a.feedbackTargetID,e=a.hideBackground,f=a.reactionCountReduced;a=a.topReactions;var g=c("useCurrentRoute")(),n=c("useCAALoggedOutDialogWrapper")({title:c("CometLoggedOutCTAStrings").popupTitle}),o=k(null),p=c("useCometEntryPointDialog")(c("CometUFIReactionsDialog.entrypoint"),{feedbackTargetID:b},"button"),q=p[0],r=p[1],s=p[2];p=p[3];var t=c("useCometInteractionTracing")(c("qpl")._(30605374,"8121"),"fluid","INTERACTION"),u=j(function(){t(function(){q({})})},[q,t]);if(f==null){var v;return c("recoverableViolation")("CometUFICommentTopReactions: Expected a reaction count, targetID: "+((v=b)!=null?v:"UNKNOWN"),"ufi2")}v=(g==null?void 0:(v=g.rootView)==null?void 0:(g=v.props)==null?void 0:g.shouldHideReactionsOnCommentsExperiment)===!0;if(l&&v===!0)return null;g=null;if(a==null)g=i.jsx("div",{className:"x6s0dn4 x1a2cdl4 xnhgr82 x1qt0ttw xgk8upj x78zum5 x1ncwhqj xlup9mm x1nn3v0j xg83lxy x1120s5i x1h0ha7o"+(e!==!0?" x9bbmet xqnafso":""),children:i.jsx("span",{className:"xi81zsa x1nxh6w3 x1fcty0u x1sibtaa xexx8yu xg83lxy x18d9i69 x1h0ha7o xuxw1ft",children:f},"count_reduced")});else{var w=f==="1";v=[].concat(a);g=i.jsxs("div",{className:"x6s0dn4 x78zum5 x1ncwhqj x1nn3v0j xg83lxy x1120s5i x1h0ha7o"+((w?" x1tlxs6b x1g8br2z x1gn5b1j x230xth xmix8c7":" x1a2cdl4 xnhgr82 x1qt0ttw xgk8upj xlup9mm"+(e!==!0?"":""))+(e!==!0?" x9bbmet xqnafso":"")),children:[i.jsx("div",{className:"x6s0dn4 x78zum5 x15zctf7"+(w?" xkhd6sd":" x1e558r4"),children:v.reverse().map(function(a){if(a==null)return null;var b=a.node.id;if(b==null)return c("recoverableViolation")("CometUFICommentTopReactions: Expected reactionID on reaction","ufi2");var d="UFIReactionIcon:"+b,e;b!=null&&c("DynamicUFIReactionTypes").reactions[b]?e=i.jsx(c("CometReactionIcon.react"),{reactionID:b,role:"presentation",size:18}):a.node.dynamicReactionIcon!=null&&(e=a.node.dynamicReactionIcon);return e!=null?i.jsx("span",{className:"x9bbmet x1a2cdl4 xnhgr82 x1qt0ttw xgk8upj x78zum5 x1a2a7pz x1n2onr6"+(w?" xwmqs3e x1mh8g0r":" xmlgm91 x139jcc6"),children:e},d):null})}),!w&&i.jsx("span",{className:"xi81zsa x1nxh6w3 x1fcty0u x1sibtaa xexx8yu xg83lxy x18d9i69 x1h0ha7o xuxw1ft",children:f},"count_reduced")]})}if(l&&c("gkx")("2820"))return g;e=l?[void 0,void 0,n,void 0]:[r,s,u,p];v=e[0];n=e[1];r=e[2];s=e[3];u=i.jsx(c("CometPressable.react"),{"aria-label":h._("__JHASH__hEDhu14BOm2__JHASH__",[h._plural(parseInt(f,10),"number")]),display:"inline",onHoverIn:v,onHoverOut:n,onPress:r,onPressIn:s,overlayRadius:10,ref:o,children:g});return a==null?u:i.jsx(c("CometUFITooltip.react"),{tooltipContentComponent:m,tooltipContentProps:{feedbackTargetID:b,scale:d("WebPixelRatio").get()},children:u})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometUFIClassicCommentTopReactions.react",["CometRelay","CometUFIClassicCommentTopReactions_feedback.graphql","CometUFICommentTopReactionsRenderer.react","isNotOutlierReactionComet","react","recoverableViolation","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");function a(a){var e=d("CometRelay").useFragment(h!==void 0?h:h=b("CometUFIClassicCommentTopReactions_feedback.graphql"),a.feedback),f=e.id;if(f==null)throw c("unrecoverableViolation")("CometUFICommentTopReactions: Expected feedback id","ufi2");var g=e.reactors,j=e.top_reactions;g=g==null?void 0:g.count_reduced;j=j==null?void 0:j.edges;if(j==null)return c("recoverableViolation")("CometUFICommentTopReactions: Expected reaction edges","ufi2");if(g==="0")return null;e=j.filter(c("isNotOutlierReactionComet")(e)).slice(0,3);return i.jsx("div",{ref:a.rootRef,children:i.jsx(c("CometUFICommentTopReactionsRenderer.react"),{feedbackTargetID:f,hideBackground:a.hideBackground,reactionCountReduced:g,topReactions:j.length===0?null:e.map(function(a){var b=a.node;if(b==null)return null;b=b.id;if(b==null)throw c("unrecoverableViolation")("CometUFITopReactions: Expected reaction_id on reaction","ufi2");return{node:{id:b},reactionCount:a==null?void 0:a.reaction_count}})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useCometUFIAwardDelightsAnimator",["CometPlaceholder.react","CometRelay","CometTextDelightAnimation.entrypoint","CometUFIAwardAsCommentSheetContents.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useMemo,j=b.useRef,k=b.useState,l={animationContainer:{paddingTop:"x1ay6j6u",paddingEnd:"x1doxw15",paddingBottom:"xy64zza",paddingStart:"x8n26zg",$$css:!0}};function a(){var a=d("CometRelay").useRelayEnvironment(),b=i(function(){return{getEnvironment:function(){return a}}},[a]);b=d("CometRelay").useEntryPointLoader(b,c("CometTextDelightAnimation.entrypoint"));var e=b[0],f=b[1];b=k(!1);var g=b[0],m=b[1],n=j(!1);function o(){m(!1),n.current=!0}function p(a){if(g)return;f({id:a!==""?a:d("CometUFIAwardAsCommentSheetContents.react").DEFAULT_AWARD_ANIMATION_ID});m(!0)}b=2/3;var q=l.animationContainer;e=h.jsx(c("CometPlaceholder.react"),{fallback:null,children:g&&e!=null&&h.jsx(d("CometRelay").EntryPointContainer,{entryPointReference:e,props:{heightScale:b,onRepeatEnd:o,xstyle:q}})});return{animationComponent:e,hasPlayedAnimationRef:n,playAnimation:p}}g["default"]=a}),98);
__d("CometUFICommentListRenderer.react",["CometFocusedStoryViewReferringFeedLocationContext","CometRelay","CometUFICommentListComposerProvider.react","CometUFICommentListRenderer_feedback.graphql","CometUFIQPLInstanceKeyContext","CometUFIReparentedCommentIDsContext.react","ErrorGuard","UFI2RealtimeContainer.react","gkx","mergeRefs","react","recoverableViolation","requireDeferred","useCometHandleCommitCommentCreate.react","useCometUFIAwardDelightsAnimator","useCometUFICodedErrorDialog","useCurrentRoute","useTriggeredStoryCTAHandler"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");e=d("react");var j=e.useCallback,k=e.useContext,l=e.useMemo,m=e.useRef,n=e.useState,o=c("requireDeferred")("CometUFIDeleteCommentSubscription").__setRef("CometUFICommentListRenderer.react"),p=c("requireDeferred")("CometUFIEditCommentSubscription").__setRef("CometUFICommentListRenderer.react"),q=c("requireDeferred")("CometUFIFeedbackCommentReactSubscription").__setRef("CometUFICommentListRenderer.react"),r=c("requireDeferred")("CometUFIFunnelLogger").__setRef("CometUFICommentListRenderer.react"),s=c("requireDeferred")("CometUFIToggleCommentPermissionSubscription").__setRef("CometUFICommentListRenderer.react"),t=c("requireDeferred")("CometUFIWorkQACommentTypeUpdateSubscription").__setRef("CometUFICommentListRenderer.react");function a(a){var e=a.displayCommentsContext,f=a.fallback,g=a.feedback,u=a.feedbackSource,v=a.feedLocation,w=a.focusCommentID,x=a.listRef,y=a.onCommitCommentCreate;a=a.storyRenderLocation;var z=d("CometRelay").useFragment(h!==void 0?h:h=b("CometUFICommentListRenderer_feedback.graphql"),g),A=m(null),B=d("CometRelay").useRelayEnvironment();g=c("useTriggeredStoryCTAHandler")();var C=g[0];g=n(null);var D=g[0];g=g[1];var E=n(null),F=E[0];E=E[1];var G=n(!1),H=G[0],I=G[1];G=c("useCometUFICodedErrorDialog")();var J=G.errorDialog,K=G.setError;G=k(d("CometUFIReparentedCommentIDsContext.react").CometUFIReparentedCommentIDsContext);var L=G.addReparentedCommentIds,M=z==null?void 0:z.id,N=z==null?void 0:z.subscription_target_id;G=j(function(){var a;if(M==null||N==null)return null;var b=!1,d=[],e={dispose:function(){b=!0,d.forEach(function(a){return c("ErrorGuard").applyWithGuard(a,null,[])})}};q.onReady(function(a){if(!b){a=a.subscribe(B,{top_level_feedback_id:M},!1,!0);d.push(a.dispose)}});z&&z.is_eligible_for_enhanced_comment_updates===!0&&!((a=z.associated_video)==null?void 0:a.broadcast_is_ama_enabled)&&(o.onReady(function(a){if(!b){a=a.subscribe({addReparentedCommentIds:L,environment:B,feedbackSource:u,topLevelFeedbackID:M});d.push(a.dispose)}}),p.onReady(function(a){if(!b){a=a.subscribe({environment:B,topLevelFeedbackID:M});d.push(a.dispose)}}));z&&z.is_synced_qa_post===!0&&t.onReady(function(a){if(!b){a=a.subscribe({environment:B,feedbackID:M});d.push(a.dispose)}});return e},[B,z,M,u,N]);var O=j(function(){return I(!0)},[]),P=j(function(){var a=A.current;if(a==null)return;a.Actions.expandList({focusComposer:!0,scrollToComposer:!0})},[]),Q=j(function(){if(M==null||N==null)return;var a=!1,b=function(){},c={dispose:function(){a=!0,b()}};s.onReady(function(c){if(!a){c=c.subscribe(B,{feedback_id:M},!1);b=c.dispose}});return c},[B,M,N]),R=k(c("CometUFIQPLInstanceKeyContext")),S=m(null),T=j(function(a){r.onReady(function(a){return a.addPoint(R,a.CometUFIFunnelLoggerEvents.COMMENT_EDIT_ERROR)}),K(a)},[R,K]),U=n(function(){return new Set()}),aa=U[0];U=U[1];var V=n(function(){return new Set()}),ba=V[0],ca=V[1];V=j(function(a){if(a==null)return;var b=(a=a.node)==null?void 0:a.id;if(b==null){c("recoverableViolation")("Could not discern an `id` having received a realtime comment. Realtime comment handling might be broken. Investigate immediately.","ufi2");return}ca(function(a){return new Set(a).add(b)})},[]);var W=c("useCometUFIAwardDelightsAnimator")(),da=W.animationComponent;W=W.playAnimation;var X=k(c("CometFocusedStoryViewReferringFeedLocationContext"));y=c("useCometHandleCommitCommentCreate.react")({feedbackRef:z,feedLocation:v,focusCommentID:w,onCommit:y,playAwardGivenAnimation:W,referringFeedLocation:X,setError:K,setLocallyComposedCommentIds:U});W=j(function(){C("COMMENT_BUTTON_TAP")},[C]);X=l(function(){return c("mergeRefs")(x,A)},[x]);U=c("gkx")("3048");var Y=c("useCurrentRoute")();U=U&&(Y==null?void 0:(U=Y.rootView)==null?void 0:(Y=U.props)==null?void 0:Y.shouldHideStoryCommentsForCrawlerExperiment)===!0;if(U)return null;if(M==null){c("recoverableViolation")("No id on feedback when fetching from relay story in CometUFICommentListRenderer, this indicates relays store/environment has been bonkered some how","ufi2");return null}Y=z==null?void 0:z.comment_list_renderer;var Z,$;(Y==null?void 0:Y.__typename)==="XFBCommentListRendererForDisplayComments"?Z={depth:0,displayCommentsContext:e,editingCommentID:D,fallback:f,feedbackSource:u,feedbackTargetID:M,feedLocation:v,focusCommentID:w,listRef:X,locallyComposedCommentIds:aa,onAddCommentClick:P,onCommitCommentCreate:y,onComposerFocusCallback:W,onEditCommentError:T,onRealtimeCommentReceived:V,onTranslateAllClick:O,realtimeCommentIds:ba,renderedTranslationCommentID:F,renderer:Y,setEditingCommentID:g,setRenderedTranslationCommentID:E,shouldRequestTranslationForAllComments:H,storyRenderLocation:a,subscribeToCommentToggling:Q,useDefaultActor:!1,viewSelectorRef:S}:(Y==null?void 0:Y.__typename)==="XFBCommentListRendererForCommentsAPI"&&($={feedbackSource:u,feedLocation:v,focusCommentID:w,renderer:Y,storyRenderLocation:a});e=i.jsx(d("CometRelay").MatchContainer,{match:Y,props:(U=Z)!=null?U:$});return i.jsxs(c("UFI2RealtimeContainer.react"),{subscribe:G,children:[i.jsx(d("CometUFIReparentedCommentIDsContext.react").CometUFIReparentedCommentIDsContextProvider,{children:i.jsx(c("CometUFICommentListComposerProvider.react"),{children:e})}),J,da]})}a.displayName=a.name+" [from "+f.id+"]";e=i.memo(a);g["default"]=e}),98);
__d("useCometUFISubscriptionManager",["JSScheduler","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useRef;function a(){var a=i(new Set()),b=i(new Set()),e=i(!1),f=h(function(b){a.current.add(b);e.current&&b.subscribe();return{dispose:function(){b.unsubscribe(),a.current["delete"](b)}}},[]),g=h(function(){e.current||(e.current=!0,a.current.forEach(function(a){var f=d("JSScheduler").scheduleSpeculativeCallback(function(){!e.current?c("recoverableViolation")("Scheduled callback to activate subscription was not canceled","ufi2"):(b.current["delete"](f),a.subscribe())});b.current.add(f)}))},[]),j=h(function(){e.current&&(e.current=!1,a.current.forEach(function(a){return a.unsubscribe()}),b.current.forEach(function(a){return d("JSScheduler").cancelCallback(a)}),b.current.clear())},[]);return[f,g,j]}g["default"]=a}),98);
__d("CometUFIRealtimeRoot.react",["UFI2RealtimeContext","react","useCometUFISubscriptionManager"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useEffect;function a(a){var b=a.children;a=a.enabled;var d=a===void 0?!0:a;a=c("useCometUFISubscriptionManager")();var e=a[0],f=a[1],g=a[2];i(function(){if(d){f();return function(){g()}}},[d,f,g]);return h.jsx(c("UFI2RealtimeContext").Provider,{value:e,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);